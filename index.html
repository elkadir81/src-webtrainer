<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SRC Web-Trainer</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* kleine Ergänzungen */
    .row { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    .row.buttons { margin-top:10px; }
    .grid2 { display:grid; grid-template-columns: 1fr 1fr; gap:14px; }
    @media (max-width: 900px){ .grid2{ grid-template-columns:1fr; } }
    textarea { width:100%; min-height:140px; }
    .card { border:1px solid #ddd; border-radius:12px; padding:14px; }
    .prompt { font-size: 1.3rem; font-weight:700; padding:8px 0; }
    .feedback { white-space: pre-wrap; margin-top:10px; }
    .score { opacity:.8; }
    .hint { opacity:.7; font-size:.9rem; }
    .inline { display:flex; gap:8px; align-items:center; }
  </style>
</head>
<body>
  <header>
    <h1>SRC Web-Trainer</h1>
    <nav>
      <button class="tab active" data-tab="diktat">Diktat</button>
      <button class="tab" data-tab="de2en">DE → EN</button>
      <button class="tab" data-tab="vokabeln">Vokabeln</button>
      <button class="tab" data-tab="lagen">Übungslagen</button>
      <button class="tab" data-tab="pruefung">Prüfung Übungen</button>
    </nav>
  </header>

  <main>
    <!-- TAB 1: Diktat -->
    <section id="tab-diktat" class="panel active">
      <div class="row">
        <label for="diktatSelect">Übungstext:</label>
        <select id="diktatSelect"></select>
      </div>

      <div class="row buttons">
        <button id="playAudio">Original-Audio abspielen</button>
        <button id="stopAudio">Stopp</button>
        <span class="hint">Hinweis: Audio startet erst nach Klick (Browser-Schutz).</span>
      </div>

      <div class="grid2">
        <div>
          <h3>1) Mitschreiben (EN)</h3>
          <textarea id="typedEN" placeholder="Hier den englischen Text mitschreiben..."></textarea>
        </div>
        <div>
          <h3>2) Eigene Übersetzung (DE)</h3>
          <textarea id="typedDE" placeholder="Hier deine deutsche Übersetzung..."></textarea>
        </div>
      </div>

      <div class="row buttons">
        <button id="gradeDE">Bewerten (DE)</button>
        <button id="toggleRef1">Referenz anzeigen</button>
      </div>

      <pre id="result1" class="result"></pre>
      <div id="ref1" class="ref hidden"></div>
    </section>

    <!-- TAB 2: DE -> EN -->
    <section id="tab-de2en" class="panel">
      <div class="row">
        <label for="de2enSelect">Übungstext:</label>
        <select id="de2enSelect"></select>
      </div>

      <div class="row buttons">
        <button id="toggleDE">DE anzeigen/ausblenden</button>
        <button id="toggleRef2">EN-Referenz anzeigen</button>
      </div>

      <div id="dePrompt" class="ref"></div>

      <h3>Dein Englisch</h3>
      <textarea id="userEN" placeholder="Hier deine englische Übersetzung..."></textarea>

      <div class="row buttons">
        <button id="gradeEN">Bewerten (EN)</button>
      </div>

      <pre id="result2" class="result"></pre>
      <div id="ref2" class="ref hidden"></div>
    </section>

    <!-- TAB 3: Vokabeln -->
    <section id="tab-vokabeln" class="panel">
      <div class="row">
        <label for="chapterSelect">Kapitel:</label>
        <select id="chapterSelect"></select>

        <label for="dirSelect">Richtung:</label>
        <select id="dirSelect">
          <option value="de2en">DE → EN</option>
          <option value="en2de">EN → DE</option>
        </select>
      </div>

      <div class="row">
        <label class="inline">
          <input type="checkbox" id="reviewFirstToggle" checked>
          Wiederholungen zuerst (Drill)
        </label>

        <label class="inline">
          <input type="checkbox" id="shuffleToggle">
          Shuffle
        </label>

        <label for="targetSelect">Ziel:</label>
        <select id="targetSelect">
          <option value="20" selected>20 richtig</option>
          <option value="10">10 richtig</option>
          <option value="all">Alle im Kapitel</option>
        </select>

        <button id="showErrorsBtn">Fehlerliste</button>
      </div>

      <div class="card">
        <div class="prompt" id="vPrompt">—</div>
        <input id="vAnswer" type="text" placeholder="Antwort eingeben..." />
        <div class="row buttons">
          <button id="vCheck">Prüfen</button>
          <button id="vNext">Nächste</button>
        </div>

        <div id="vFeedback" class="feedback"></div>

        <div class="row">
          <div id="vProgress" class="score">Fortschritt: 0/0</div>
          <div id="vScore" class="score">Score: 0/0</div>
        </div>

        <div id="vDone" class="feedback" style="font-weight:600;"></div>
        <div id="vErrors" class="ref hidden"></div>
      </div>
    </section>

    <!-- TAB 4: Übungslagen -->
    <section id="tab-lagen" class="panel">
      <div class="row">
        <label for="lageSelect">Übungslage:</label>
        <select id="lageSelect"></select>

        <button id="lagePrev">◀︎</button>
        <button id="lageNext">▶︎</button>

        <button id="openLageSolution">Lösung (PDF) öffnen</button>
      </div>

      <div id="lageTask" class="ref"></div>
      <img id="lageImg" class="hidden" alt="Übungslage Bild" style="max-width:100%; border-radius:10px;">

      <h3>Deine Lösung (optional)</h3>
      <textarea id="lageAnswer" placeholder="Hier kannst du deinen Funkspruch / deine Notizen schreiben..."></textarea>

      <div class="row buttons">
        <button id="lageClear">Text löschen</button>
      </div>

      <div id="lageHint" class="hint"></div>
    </section>

    <!-- TAB 5: Prüfung Übungen 1-21 -->
    <section id="tab-pruefung" class="panel">
      <div class="row">
        <label for="examSelect">Übung:</label>
        <select id="examSelect"></select>

        <button id="examPrev">◀︎</button>
        <button id="examNext">▶︎</button>

        <button id="openExamSolution">Lösung (PDF) öffnen</button>
      </div>

      <div id="examTask" class="ref"></div>
      <img id="examImg" class="hidden" alt="Übung Bild" style="max-width:100%; border-radius:10px;">

      <h3>Deine Lösung (optional)</h3>
      <textarea id="examAnswer" placeholder="Hier kannst du deine Antwort/Übersetzung schreiben..."></textarea>

      <div class="row buttons">
        <button id="examClear">Text löschen</button>
      </div>

      <div id="examHint" class="hint"></div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
